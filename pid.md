# 串级PID
单极PID适合线性系统，当输出量和被控制量呈线性关系时单极PID能获得较好的效果，但是四轴不是线性系统，现代学者认为，四轴通常可以简化为一个二阶阻尼系统。为什么四轴不是线性系统呢？首先，输出的电压和电机转速不是呈正比的，其次，螺旋桨转速和升力是平方倍关系，故单极PID在四轴上很难取得很好效果，能飞，但是不好飞。
为了解决这个问题，我们提出了串级PID这个解决方法。

> 数字 PID 控制的实现必须用数值逼近的方法.
> 
> 当采样周期相当短时, 用求和代替积分, 用后向差分代替微分, 使模拟 PID 离散化变为差分方程.

> 数字 PID 算法总体分为位置型控制算法和增量型控制算法.

## 伪代码
> 外环PID

- 计算被控轴(*Pitch, Roll, Yaw*)角度误差 *(实际角度 - 期望角度)*

* *积分项*

	- 对误差结果进行累加 *(用求和代替积分)*
	- 对累加结果进行积分限幅

* *微分项*

	- 使用当前的角度值减去上一次的角度值 *(后向差分)*

* *外环输出*

	- 比例系数 **`P`** x 当前误差 + 积分系数 **`I`** x 积分项 + 微分系数 **`D`** x 积分项
- 保存上一次角度值

> 内环PD

* *比例项*

	- 外环输出 + 该轴角速度 * 3.5
* *微分项*

	- 该轴角速度 - 上一次该轴角速度 *(后向差分)*

* *内环输出*

	- 比例系数`p` x 比例项 + 微分系数`d` x 微分项

- 存储角速度



























